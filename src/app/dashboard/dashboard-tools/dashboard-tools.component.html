<div class="pt-5 mx-auto">
  <div class="container-fluid" *ngIf="userRole!=='Administrator'">

    <div class="row justify-content-center animated rotateInDownLeft" style="margin-top: 25px">
      <div class="col" *ngFor="let item of data; let id= index;" style="padding-top: 10px; ">
        <div class="card" style="margin-bottom: 10px;
           cursor: pointer; " (click)="updateleadLogTypeSelector(id)" id="counterCard">
          <div class="card-body text-center" style="background-color: rgba(255,255,255,0.4); ">
            <div class="h2-responsive" style="color: rgb(3, 0, 34); font-size: 1.5rem;">
              <strong>{{item.Count}}</strong>
            </div>
            <span class="card-text" style="color: #32375f">
              <strong>{{item.LeadStatus}}</strong>
            </span>
          </div>
          <div class="" [ngClass]="{
            'badge-default2':item.LeadStatus==='New' ,
            'badge-primary2':item.LeadStatus==='InProcess',
            'badge-warning2':item.LeadStatus==='Won',
            'badge-success2':item.LeadStatus==='Lost',
            'badge-grey2':item.LeadStatus==='Hold'
            }">
          </div>
        </div>
      </div>
      <div class="col animated slideInRight" style="margin-top: 10px;" *ngIf="chartVisible">
        <div class="card hoverable" style="margin-bottom: 10px;
             cursor: pointer; " (click)="updateleadLogTypeSelector(id)">
          <div class="card-body text-center" style="display: block; ;background-color: rgba(255,255,255,0.4); ">
            <canvas mdbChart [chartType]="chartType" [datasets]="chartDatasets" [labels]="chartLabels" [colors]="chartColors" [options]="chartOptions"
              [legend]="true" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
            </canvas>
          </div>
        </div>
      </div>
    </div>

    <div class="row animated rotateInDownLeft" style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-around; align-items: center; padding-left: 10px; padding-right: 10px; ">
      <mat-form-field style="margin-right: 5px">
        <input matInput placeholder="Search here" (keyup)='updateFilter()' [(ngModel)]="val">
      </mat-form-field>
      <mat-form-field style="margin-right: 5px">
        <mat-select placeholder="Searching In" name="SearchHere" (selectionChange)="updateFilter()" [(ngModel)]="searchIn" ngDefaultControl>

          <mat-option value="Multiple">Multiple</mat-option>
          <mat-option value="Priority">Priority</mat-option>
          <mat-option value="Category">Category</mat-option>
          <mat-option value="Client">Client</mat-option>
          <mat-option value="Project">Project</mat-option>
          <mat-option value="Subject">Subject</mat-option>
          <mat-option value="LeadNo">LeadNo</mat-option>
          <mat-option value="Description">Description</mat-option>
          <mat-option value="Team">Team</mat-option>
          <mat-option value="Company">Company</mat-option>
          <mat-option value="ContactPerson">Contact Person</mat-option>
          <mat-option value="ContactNumber">Contact Number</mat-option>
          <mat-option value="EmailID">EmailID</mat-option>
          <mat-option value="AssignByName">Assign By</mat-option>
          <mat-option value="AssignToName">Assign To</mat-option>
          <mat-option value="InProcessByName">InProcess By</mat-option>
          <mat-option value="CreatedByName">Created By</mat-option>
          <mat-option value="HoldByName">Hold By</mat-option>
          <mat-option value="WonByName">Won By</mat-option>
          <mat-option value="LostByName">Lost By</mat-option>

        </mat-select>
      </mat-form-field>
      <mat-form-field style="margin-right: 5px">
        <mat-select placeholder="Sorting On" name="SortHere" (selectionChange)="updateFilter()" [(ngModel)]="valSort" ngDefaultControl>

          <mat-option value="">None</mat-option>

          <mat-option value="LeadNo">LeadNo</mat-option>

          <mat-option value="Priority">Priority</mat-option>

          <mat-option value="Subject">Subject</mat-option>

          <mat-option value="LeadDescription">Description</mat-option>

          <mat-option value="CreatedDate">Creation Date</mat-option>

        </mat-select>
      </mat-form-field>

      <mat-form-field style="margin-right: 5px">
        <mat-select placeholder="Sort Type" name="SortType" (selectionChange)="updateFilter()" [(ngModel)]="ascSort" ngDefaultControl>

          <mat-option value=true>Ascending</mat-option>

          <mat-option value=false>Descending</mat-option>

        </mat-select>
      </mat-form-field>
      <mat-form-field style="margin-right: 5px">

        <mat-select placeholder="Allocation" name="SortType" (selectionChange)="updateFilter()" [(ngModel)]="allocationType" ngDefaultControl>

          <mat-option value="Team">Team</mat-option>

          <mat-option value="OnlyMe">My Leads Only</mat-option>

          <mat-option value="ExceptMe">Team but Except Me</mat-option>

        </mat-select>
      </mat-form-field>
      <mat-checkbox style="margin-right: 5px" color="primary" matTooltip="Grid view of Leads" [(ngModel)]="condensedView">Condensed View</mat-checkbox>
      <i class="fa fa-bar-chart" style="margin-right: 5px" matTooltip="Click to see Chart" (click)="toggleChart()" style="padding-bottom: 10px"></i>
      <i class="fa fa-refresh" style="margin-right: 5px" matTooltip="Clear and refresh" (click)="clearSerchCriteria()" style="padding-bottom: 10px;"></i>
    </div>


    <!-- </div> -->

    <div class="row justify-content-center animated slideInUp">
      <div class="col">
        <div class="mx-auto">
          <div class="container-fluid" *ngFor="let src of source; let i=
            index;">

            <div class="row" *ngIf="this.leadLogTypeSelector===src.status">
              <div class="col">
                <div>
                  <div class="card-header" style="border-radius: 5px; background-color: white; text-align: center; font-weight: bold; box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.16), 0 2px 10px 0 rgba(0, 0, 0, 0.12);">
                    <strong>{{src.status}}</strong>
                  </div>

                  <div class="" *ngIf="!condensedView">
                    <div id="cardPanel" style="display: flex; flex-direction: row; flex-wrap: wrap; margin: 10px; justify-content: center; align-items: center; align-content: flex-start">
                      <div class="row leadBody" *ngIf="src.data.length==0">No data found</div>
                      <!-- Start -->
                      <div class="card" *ngFor="let data of
                      src.data; let p= index;" style="margin: 5px" [ngClass]="{
                        'highPriority': data.Priority === 'High',
                        'mediumPriority': data.Priority === 'Medium',
                        'lowPriority': data.Priority === 'Low'
                      }" style="width: 100%; margin-top: 15px">
                        <div class="card-body">
                          <div style="font-weight: bold; display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-between">
                            <div style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: flex-start">
                              <div [ngClass]="{
                                  'highPriorityBackground': data.Priority === 'High',
                                  'mediumPriorityBackground': data.Priority === 'Medium',
                                  'lowPriorityBackground': data.Priority === 'Low'
                                }">
                                {{data.LeadNo}}
                              </div>
                              <div [ngClass]="{
                                'highPriorityBorder': data.Priority === 'High',
                                'mediumPriorityBorder': data.Priority === 'Medium',
                                'lowPriorityBorder': data.Priority === 'Low'
                              }">{{data.Subject}}</div>
                            </div>
                            <div class="text-right" matTooltip="Silver" style="float: right;" *ngIf="data.LeadCategory===1">
                              <i class="fa fa-diamond mr-1 pulse" *ngIf="data.LeadCategory===1"></i>
                            </div>
                            <div class="text-right" matTooltip="Gold" style="float: right;" *ngIf="data.LeadCategory===2">
                              <i class="fa fa-diamond mr-1 pulse"></i>
                              <i class="fa fa-diamond mr-1 pulse"></i>
                            </div>
                            <div class="text-right" matTooltip="Platinum" style="float: right;" *ngIf="data.LeadCategory===3">
                              <i class="fa fa-diamond mr-1 pulse"></i>
                              <i class="fa fa-diamond mr-1 pulse"></i>
                              <i class="fa fa-diamond mr-1 pulse"></i>
                            </div>
                          </div>

                          <div class="card-text" style="display: inline;text-align: justify; text-justify: inter-word;  border-radius: 5px ">{{data.LeadDescription}}</div>
                          <div class="card-text" style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-between; margin-top: 5px;">
                            <div style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: flex-start">
                              <div matTooltip="Lead assigned to team" (click)="demoBasic.show(); updateModal(data);" [ngClass]="{
                                  'highPriorityBorder': data.Priority === 'High',
                                  'mediumPriorityBorder': data.Priority === 'Medium',
                                  'lowPriorityBorder': data.Priority === 'Low'
                                }">
                                Team:
                                <strong>{{data.TeamName | titlecase}}</strong>
                              </div>
                              <div matTooltip="Lead assigned to person" (click)="demoBasic.show(); updateModal(data);" [ngClass]="{
                                  'highPriorityBorder': data.Priority === 'High',
                                  'mediumPriorityBorder': data.Priority === 'Medium',
                                  'lowPriorityBorder': data.Priority === 'Low'
                                }">
                                Assign To:
                                <strong>{{ data.AssignToName | titlecase}}</strong>
                              </div>
                              <div matTooltip="Lead created by" (click)="demoBasic.show(); updateModal(data);" [ngClass]="{
                                  'highPriorityBorder': data.Priority === 'High',
                                  'mediumPriorityBorder': data.Priority === 'Medium',
                                  'lowPriorityBorder': data.Priority === 'Low'
                                }">
                                Created By:
                                <strong>{{ data.NewByName | titlecase}}</strong>
                              </div>
                              <div *ngIf="data.Message !== null" matTooltip="Last communication" (click)="openLeadMessage(i,p)" [ngClass]="{
                                  'highPriorityBorder': data.Priority === 'High',
                                  'mediumPriorityBorder': data.Priority === 'Medium',
                                  'lowPriorityBorder': data.Priority === 'Low'
                                }">
                                {{data.Message.OperationByName | titlecase}}: {{data.Message.MessageLog}} -
                                <time> {{data.Message.OperationDate | timeAgo }} </time>
                              </div>
                              <div matTooltip="Time after creation of Lead" (click)="demoBasic.show(); updateModal(data);" [ngClass]="{
                                  'highPriorityBorder': data.Priority === 'High',
                                  'mediumPriorityBorder': data.Priority === 'Medium',
                                  'lowPriorityBorder': data.Priority === 'Low'
                                }">
                                <time>
                                  <strong>{{ data.NewDate | timeAgo}}</strong>
                                </time>
                              </div>
                            </div>
                            <div>
                              <div style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: flex-end">
                                <div (click)="openLeadMessage(i,p)" style="background: linear-gradient(40deg,#45cafc,#303f9f)!important; border-radius: 50%; box-shadow: 0px 7px 15px #4f557e; margin-right: 5px">
                                  <i style="align-self: center; color: white; padding: 10px;" class="fa fa-comment"></i>
                                </div>
                                <div style="background: linear-gradient(40deg,#ff6ec4,#7873f5)!important;border-radius: 50%; box-shadow: 0px 7px 15px #4f557e; "
                                  mat-icon-button [matMenuTriggerFor]="menu">
                                  <i style="align-self: center; color: white; padding: 10px 15px;" class="fa fa-ellipsis-v"></i>
                                </div>

                                <mat-menu class="actionsButton" #menu="matMenu">

                                  <button class="actionsButton" mat-menu-item [hidden]="!(src.status=== 'New' && 
                                          dashboardState==='myleads')" (click)="processLead(data.Oid,2)">
                                    <span>Take Lead</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item [hidden]="!(((src.status=== 'Won' || src.status==='Lost') && userRole==='Manager') || (src.status==='Won' &&  userRole==='User' && dashboardState==='myleads') || ((src.status=== 'Won' || src.status==='Lost') && userRole==='User' && dashboardState==='myleads' && Oid===data.TeamLeader.toString()))"
                                    (click)="processLead(data.Oid,1)">
                                    <span>Re-New</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item [hidden]="!((src.status==='New' || src.status==='InProcess') && (userRole==='Manager'
                                          || (dashboardState==='myleads' && userRole==='User' && Oid===data.TeamLeader.toString())))"
                                    (click)="processLead(data.Oid,3)">
                                    <span>Won</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item [hidden]="!((userRole==='Manager' || (src.status==='InProcess' && (dashboardState==='myleads' && userRole==='User'))) && src.status!=='Lost' && src.status!=='Hold')"
                                    (click)="processLead(data.Oid,4)">
                                    <span>Lost</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item [hidden]="!(userRole==='Manager' || (dashboardState==='myleads' && userRole==='User' && Oid===data.TeamLeader.toString()) && (src.LeadStatus==='New' || src.LeadStatus==='InProcess' || src.LeadStatus==='Won'))"
                                    (click)="processLead(data.Oid,5)">
                                    <span>Hold</span>
                                  </button>
                                  <mat-divider></mat-divider>
                                  <button class="actionsButton" mat-menu-item style="font-style: oblique" [hidden]="(src.status==='Hold' || src.status==='Lost' || dashboardState==='byme') && Oid !== TeamLeader"
                                    [matMenuTriggerFor]="assignMenu">
                                    <span style="margin-right: 10px">Assign Lead</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item style="font-style: oblique" [hidden]="src.status==='Lost' || src.status==='Hold'"
                                    [matMenuTriggerFor]="priorityMenu">
                                    <span style="margin-right: 10px">Change Priority</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item style="font-style: oblique" [hidden]="src.status==='Lost' || src.status==='Hold'"
                                    [matMenuTriggerFor]="categoryMenu">
                                    <span style="margin-right: 10px">Change Category</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item style="font-style: oblique" (click)="NewLeadMessage(i,p)">
                                    <span style="margin-right: 10px">Message</span>
                                    <i class="fa fa-comment"></i>
                                  </button>
                                </mat-menu>
                                <mat-menu #priorityMenu="matMenu">
                                  <button class="actionsButton" mat-menu-item (click)="changePriority(i, p, 'High')">High</button>
                                  <button class="actionsButton" mat-menu-item (click)="changePriority(i, p, 'Medium')">Medium</button>
                                  <button class="actionsButton" mat-menu-item (click)="changePriority(i, p, 'Low')">Low</button>
                                </mat-menu>
                                <mat-menu #assignMenu="matMenu">
                                  <button class="actionsButton" mat-menu-item *ngFor="let item of data.TeamMembers; let id= index;" (click)="assignLead(i, p, item.UserID)">{{item.UserName | titlecase}}</button>
                                </mat-menu>
                                <mat-menu #categoryMenu="matMenu">
                                  <button class="actionsButton" mat-menu-item (click)="changeCategory(i, p, 1)">
                                    <i class="fa fa-diamond mr-1"></i>
                                  </button>
                                  <button class="actionsButton" mat-menu-item (click)="changeCategory(i, p, 2)">
                                    <i class="fa fa-diamond mr-1"></i>
                                    <i class="fa fa-diamond mr-1"></i>
                                  </button>
                                  <button class="actionsButton" mat-menu-item (click)="changeCategory(i, p, 3)">
                                    <i class="fa fa-diamond mr-1"></i>
                                    <i class="fa fa-diamond mr-1"></i>
                                    <i class="fa fa-diamond mr-1"></i>
                                  </button>
                                </mat-menu>
                              </div>
                            </div>
                          </div>

                          <div class="card-text" style="display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-between; margin-top: 5px;">
                            {{data.ClientName}} ♦ {{data.EmailID}}
                          </div>

                        </div>
                      </div>
                      <!-- Stop -->
                      <div class="" *ngFor="let data of
                        src.data; let p= index;" id="lead" style="display: none;">

                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" aria-expanded="true">
                          <div class="" data-target="#basicExample">

                            <div style="padding-left: 10px ;display: flex;flex-direction: row; justify-content: space-between; 
                                   align-items: center; color: #32375f; ">
                              <div class="text-left" style="border-radius: 2px;">
                                <a (click)="demoBasic.show(); updateModal(data);" matTooltip="Lead No" style="background-color: #32375f; color: white;padding: 2px;">
                                  <strong>#{{data.LeadNo}}</strong>
                                </a>
                                <strong (click)="demoBasic.show(); updateModal(data);" style="color: #32375f; background-color: white; padding: 2px;">{{data.Subject}}</strong>
                              </div>
                              <div style="display: flex; flex-direction: row; flex-wrap: row">

                                <div class="text-center card-text z-depth-1" style="border-radius: 5px; padding-left: 5px; padding-right: 5px; margin-right: 5px; cursor: pointer;"
                                  mat-icon-button [matMenuTriggerFor]="menu">
                                  <strong>Actions&nbsp;
                                    <i class="fa fa-caret-down"></i>
                                  </strong>
                                </div>

                                <mat-menu class="actionsButton" #menu="matMenu">

                                  <button class="actionsButton" mat-menu-item [hidden]="!(src.status=== 'New' && 
                                          dashboardState==='myleads')" (click)="processLead(data.Oid,2)">
                                    <span>Take Lead</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item [hidden]="!(((src.status=== 'Won' || src.status==='Lost') && userRole==='Manager') || (src.status==='Won' &&  userRole==='User' && dashboardState==='myleads') || ((src.status=== 'Won' || src.status==='Lost') && userRole==='User' && dashboardState==='myleads' && Oid===data.TeamLeader.toString()))"
                                    (click)="processLead(data.Oid,1)">
                                    <span>Re-New</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item [hidden]="!((src.status==='New' || src.status==='InProcess') && (userRole==='Manager'
                                          || (dashboardState==='myleads' && userRole==='User' && Oid===data.TeamLeader.toString())))"
                                    (click)="processLead(data.Oid,3)">
                                    <span>Won</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item [hidden]="!((userRole==='Manager' || (src.status==='InProcess' && (dashboardState==='myleads' && userRole==='User'))) && src.status!=='Lost' && src.status!=='Hold')"
                                    (click)="processLead(data.Oid,4)">
                                    <span>Lost</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item [hidden]="!(userRole==='Manager' || (dashboardState==='myleads' && userRole==='User' && Oid===data.TeamLeader.toString()) && (src.LeadStatus==='New' || src.LeadStatus==='InProcess' || src.LeadStatus==='Won'))"
                                    (click)="processLead(data.Oid,5)">
                                    <span>Hold</span>
                                  </button>
                                  <mat-divider></mat-divider>
                                  <button class="actionsButton" mat-menu-item style="font-style: oblique" [hidden]="(src.status==='Hold' || src.status==='Lost' || dashboardState==='byme') && Oid !== TeamLeader"
                                    [matMenuTriggerFor]="assignMenu">
                                    <span style="margin-right: 10px">Assign Lead</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item style="font-style: oblique" [hidden]="src.status==='Lost' || src.status==='Hold'"
                                    [matMenuTriggerFor]="priorityMenu">
                                    <span style="margin-right: 10px">Change Priority</span>
                                  </button>
                                  <button class="actionsButton" mat-menu-item style="font-style: oblique" (click)="NewLeadMessage(i,p)">
                                    <span style="margin-right: 10px">Message</span>
                                    <i class="fa fa-comment"></i>
                                  </button>
                                </mat-menu>
                                <mat-menu #priorityMenu="matMenu">
                                  <button class="actionsButton" mat-menu-item (click)="changePriority(i, p, 'High')">High</button>
                                  <button class="actionsButton" mat-menu-item (click)="changePriority(i, p, 'Medium')">Medium</button>
                                  <button class="actionsButton" mat-menu-item (click)="changePriority(i, p, 'Low')">Low</button>
                                </mat-menu>
                                <mat-menu #assignMenu="matMenu">
                                  <button class="actionsButton" mat-menu-item *ngFor="let item of data.TeamMembers; let id= index;" (click)="assignLead(i, p, item.UserID)">{{item.UserName | titlecase}}</button>
                                </mat-menu>
                                <span *ngIf="data.Priority!==''" class="badge" matTooltip="Priority" [ngClass]="{
                                      'red': data.Priority === 'High',
                                      'blue': data.Priority === 'Medium',
                                      'green': data.Priority === 'Low'
                                    }" style="width:75px;">{{data.Priority}}</span>
                              </div>

                            </div>
                            <div class="card-text text-center" style="padding: 10px;  margin-top: 5px; border-bottom: 1px solid rgba(255, 255, 255, 0); margin-right: 10px; display: flex; align-items: center; border-radius: 5px; "
                              (click)="demoBasic.show(); updateModal(data);">
                              <strong>Description:</strong>&nbsp;{{data.LeadDescription}}
                            </div>

                            <div class="card-text" style="padding-left: 10px; display: flex; flex-direction: row; flex-wrap: wrap; justify-content: flex-start; font-size: medium; justify-items: center;">
                              <div class="badge-light2 mr-1" matTooltip="Time after creation of Lead" (click)="demoBasic.show(); updateModal(data);">
                                <time>
                                  <strong>{{ data.NewDate | timeAgo}}</strong>
                                </time>
                              </div>
                              <div class="badge-light2 mr-1" matTooltip="Lead assigned to team" (click)="demoBasic.show(); updateModal(data);">
                                Team:
                                <strong> {{data.TeamName | titlecase}} </strong>
                              </div>
                              <div class="badge-light2 mr-1" matTooltip="Lead assigned to person" (click)="demoBasic.show(); updateModal(data);">
                                Assign To:
                                <strong> {{ data.AssignToName | titlecase}} </strong>
                              </div>
                              <div class="badge-light2 mr-1" matTooltip="Lead created by" (click)="demoBasic.show(); updateModal(data);">
                                Created By:
                                <strong> {{ data.NewByName | titlecase}} </strong>
                              </div>
                              <div class="badge-light2 mr-1" style="padding-left: 10px" *ngIf="data.Message !== null" matTooltip="Last communication" (click)="openLeadMessage(i,p)">
                                {{data.Message.OperationByName | titlecase}}: {{data.Message.MessageLog}} -
                                <time> {{data.Message.OperationDate | timeAgo }} </time>
                              </div>
                            </div>

                            <div class="card-text" style="padding-left: 10px; display: flex; flex-direction: row; flex-wrap: wrap; justify-content: flex-start; font-size: medium; justify-items: center;">
                              <div class="badge-light2 mr-1" style="padding-left: 10px" *ngIf="data.Message !== null" matTooltip="Last communication" (click)="openLeadMessage(i,p)">
                                {{data.CompanyName}}
                              </div>
                              <div class="badge-light2 mr-1" style="padding-left: 10px" *ngIf="data.ContactPerson1 !== ''" matTooltip="Last communication"
                                (click)="openLeadMessage(i,p)">
                                {{data.ContactPerson1}} - {{data.ContactNumber1}}
                              </div>
                              <div class="badge-light2 mr-1" style="padding-left: 10px" *ngIf="data.ContactPerson2 !== ''" matTooltip="Last communication"
                                (click)="openLeadMessage(i,p)">
                                {{data.ContactPerson2}} - {{data.ContactNumber2}}
                              </div>
                              <div class="badge-light2 mr-1" style="padding-left: 10px" *ngIf="data.ContactPerson3 !== ''" matTooltip="Last communication"
                                (click)="openLeadMessage(i,p)">
                                {{data.ContactPerson3}} - {{data.ContactNumber3}}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="card hoverable animated slideInUp" *ngIf="condensedView">
                    <ngx-datatable #table class="material" [rows]="src.data" [columns]="columns" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
                      [rowHeight]="50" [reorderable]="'true'" [limit]="7" [scrollbarH]="true" [loadingIndicator]="loadingIndicator">

                      <ngx-datatable-column name="" [width]="80" [sortable]="false" [canAutoResize]="false" [draggable]="false" [resizeable]="false">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">

                          <a class="fa fa-reply" (click)="selectRow(row)"></a>&nbsp;
                          <a class="fa fa-link" data-target="#basicExample" (click)="demoBasic.show(); updateModal(row);"></a>&nbsp;

                        </ng-template>

                      </ngx-datatable-column>
                      <ngx-datatable-column name="Lead" prop="LeadNo"></ngx-datatable-column>
                      <ngx-datatable-column name="Subject" prop="Subject" [width]="300">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          <strong style="color: #32375f">{{value }}</strong>
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Description" prop="LeadDescription" [width]="400"></ngx-datatable-column>
                      <ngx-datatable-column name="Team" prop="TeamName" [width]="180">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          {{value | titlecase}}
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Created By" prop="CreatedByName">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          <div class="text-center" style="border: 1px solid rgba(255, 255, 255, 0); border-radius: 5px; background-color: beige">
                            {{value | titlecase}}
                          </div>
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Created On" prop="CreatedDate">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          <time>{{value | timeAgo}}</time>
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Assign To" prop="AssignToName">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          <div class="badge blue text-center" style="border: 1px solid rgba(255, 255, 255, 0); border-radius: 5px; background-color: beige">
                            {{value | titlecase}}
                          </div>
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Assign On" prop="AssignDate">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          <time>{{value | timeAgo}}</time>
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Company" prop="CompanyName">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          {{value | titlecase}}
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Project" prop="ProjectName">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          {{value | titlecase}}
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Priority" prop="Priority"></ngx-datatable-column>
                      <!-- <ngx-datatable-column name="Last Update By" prop="Message.OperationByName">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          {{value | titlecase}}
                        </ng-template>
                      </ngx-datatable-column> -->
                      <ngx-datatable-column name="Last Update On" prop="Message.OperationDate">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          <time>{{value | timeAgo}}</time>
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column [width]="150" name="Last Update" prop="Message.MessageLog"></ngx-datatable-column>
                      <ngx-datatable-column name="Assign By" prop="AssignByName">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          {{value | titlecase}}
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Hold By" prop="HoldByName">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          {{value | titlecase}}
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Lost By" prop="LostByName">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          {{value | titlecase}}
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Created By" prop="NewByName">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          {{value | titlecase}}
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Won By" prop="WonByName">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          {{value | titlecase}}
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="InProcess By" prop="InProcessByName">
                        <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                          {{value | titlecase}}
                        </ng-template>
                      </ngx-datatable-column>
                    </ngx-datatable>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="pt-5 mx-auto animated zoomIn" *ngIf="userRole==='Administrator'">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col">
        <div class="card">
          <div class="card-body">
            <div class="card-text">
              <h1 class="h3-responsive">
                <i class="fa fa-cog"></i>&nbsp;Welcome to Admin Panel, {{userName | titlecase}}
              </h1>
              <hr>

              <div class="card-text">

                <div class="row" style="margin-bottom: 15px;">
                  <div class="col">

                    <div class="dropdown-item waves-light" [routerLink]="['company']" routerLinkActive="animated" mdbWavesEffect>
                      <div class="card-body">
                        <a>
                          <i class="fa fa-building" aria-hidden="true"></i>
                          Company</a>
                      </div>
                    </div>

                  </div>

                  <div class="col">

                    <div [routerLink]="['project']" class="dropdown-item
                          waves-light" routerLinkActive="animated" mdbWavesEffect>
                      <div class="card-body">
                        <a>
                          <i class="fa fa-industry" aria-hidden="true"></i>
                          Project</a>
                      </div>

                    </div>
                  </div>
                </div>

                <div class="row" style="margin-bottom: 15px;">
                  <div class="col">

                    <div [routerLink]="['user']" class="dropdown-item
                          waves-light" mdbWavesEffec>
                      <div class="card-body">
                        <a routerLinkActive="animated">
                          <i class="fa fa-user-circle" aria-hidden="true"></i>
                          User</a>
                      </div>
                    </div>
                  </div>

                  <div class="col">
                    <div [routerLink]="['team']" class="dropdown-item
                          waves-light" routerLinkActive="animated" mdbWavesEffect>
                      <div class="card-body">
                        <a>
                          <i class="fa fa-cubes" aria-hidden="true"></i>
                          Team</a>
                      </div>
                    </div>
                  </div>

                </div>

                <div class="row" style="margin-bottom: 25px;">
                  <div class="col">
                    <div [routerLink]="['lead-type']" class="dropdown-item
                          waves-light" routerLinkActive="animated" mdbWavesEffect>
                      <div class="card-body">
                        <a>
                          <i class="fa fa-ticket" aria-hidden="true"></i>
                          Lead Type</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="divider dropdown-divider"></div>

            <div class="" [routerLink]="['create-lead']" class="dropdown-item
                  waves-light" routerLinkActive="animated" mdbWavesEffect>
              <div class="card-body">
                <a>
                  <i class="fa fa-plus" aria-hidden="true"></i>&nbsp;Create Lead
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>



<div mdbModal #demoBasic="mdb-modal" class="modal fade fontclass" id="basicExample" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-fluid modalsize" role="document">
    <div class="modal-content">
      <div class="modal-header" [ngClass]="{
        'moddef':modalData.LeadStatus=='1',
        'modpri':modalData.LeadStatus=='2',
        'modwar':modalData.LeadStatus=='3',
        'modsuc':modalData.LeadStatus=='4',
        'modgre':modalData.LeadStatus=='5'
        }">
        <h4 style="color: rgb(69, 84, 92); font-weight: bold;" class="modal-title" id="myModalLabel">#{{modalData.LeadNo}}:&nbsp;
          <strong>{{modalData.Subject}}</strong>
          <br>
        </h4>

        <button type="button" class="close" data-dismiss="modal" aria-label="Lost" (click)="demoBasic.hide()">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">

        <div class="big" style="padding-left: 10px;color: rgb(49, 49, 49);">
          <span> Created &nbsp;: &nbsp;</span>
          {{ modalData.CreatedDate | timeAgo}} &nbsp;By&nbsp; {{ modalData.CreatedByName | titlecase}}
          <br>
          <span *ngIf="modalData.AssignToName !== ''">Assignto&nbsp;:&nbsp;&nbsp;{{ modalData.AssignToName | titlecase}}</span>
        </div>

        <table class="table table-responsive">
          <thead>
            <tr class="fontclass">
              <th></th>
              <th>Create</th>
              <th>
                <span [ngClass]="{'space': modalData.AssignByName == ''}">Assign</span>
              </th>
              <th>
                <span [ngClass]="{'space': modalData.InProcessByName == ''}">InProcess</span>
              </th>
              <th>
                <span [ngClass]="{'space': modalData.WonByName == ''}">Won</span>
              </th>
              <th>
                <span [ngClass]="{'space': modalData.LostByName == ''}">Lost</span>
              </th>
              <th>
                <span [ngClass]="{'space': modalData.HoldByName == ''}">Hold</span>
              </th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>Date&nbsp;:&nbsp;</td>
              <td>
                <div>{{modalData.CreatedDate | date }}</div>
              </td>
              <td>
                <div *ngIf="modalData.AssignByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.AssignByName !== ''">{{modalData.AssignDate | date }}</div>
              </td>
              <td>
                <div *ngIf="modalData.InProcessByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.InProcessByName !== ''">{{modalData.InProcessDate | date }}</div>
              </td>
              <td>
                <div *ngIf="modalData.WonByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.WonByName !== ''">{{modalData.WonDate | date }}</div>
              </td>
              <td>
                <div *ngIf="modalData.LostByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.LostByName !== ''">{{modalData.LostDate | date }}</div>
              </td>
              <td>
                <div *ngIf="modalData.HoldByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.HoldByName !== ''">{{modalData.HoldDate | date }}</div>
              </td>
            </tr>


            <tr>
              <td>Time&nbsp;:&nbsp;</td>
              <td>
                <div>{{modalData.CreatedDate | date: 'shortTime'}}</div>
              </td>
              <td>
                <div *ngIf="modalData.AssignByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.AssignByName !== ''">{{modalData.AssignDate | date: 'shortTime'}}</div>
              </td>
              <td>
                <div *ngIf="modalData.InProcessByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.InProcessByName !== ''">{{modalData.InProcessDate | date: 'shortTime'}}</div>
              </td>
              <td>
                <div *ngIf="modalData.WonByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.WonByName !== ''">{{modalData.WonDate | date: 'shortTime'}}</div>
              </td>
              <td>
                <div *ngIf="modalData.LostByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.LostByName !== ''">{{modalData.LostDate | date: 'shortTime'}}</div>
              </td>
              <td>
                <div *ngIf="modalData.HoldByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.HoldByName !== ''">{{modalData.HoldDate | date: 'shortTime'}}</div>
              </td>
            </tr>


            <tr>
              <td>By&nbsp;:&nbsp;</td>
              <td>
                <div>{{modalData.CreatedByName | titlecase}}</div>
              </td>
              <td>
                <div *ngIf="modalData.AssignByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.AssignByName !== ''">{{modalData.AssignByName | titlecase}}</div>
              </td>
              <td>
                <div *ngIf="modalData.InProcessByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.InProcessByName !== ''">{{modalData.InProcessByName | titlecase}}</div>
              </td>
              <td>
                <div *ngIf="modalData.WonByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.WonByName !== ''">{{modalData.WonByName | titlecase}}</div>
              </td>
              <td>
                <div *ngIf="modalData.LostByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.LostByName !== ''">{{modalData.LostByName | titlecase}}</div>
              </td>
              <td>
                <div *ngIf="modalData.HoldByName == ''">
                  <span class="space"></span>
                </div>
                <div *ngIf="modalData.HoldByName !== ''">{{modalData.HoldByName | titlecase}}</div>
              </td>
            </tr>

          </tbody>
        </table>


      </div>

    </div>
  </div>
</div>
